---
layout: layouts/event.njk
pagination:
    data: eventData.events
    size: 1
    alias: event
permalink: "events/{{ event.eventSlug }}/"
eleventyComputed:
    title: "{{ event.eventName | safe }}"
    ogAPIImage: "https://v1.screenshot.11ty.dev/https%3A%2F%2Fwww.bigbadcon.com%2Fog%2Fevents%2F{{event.eventSlug}}%2F/opengraph/"
    heroImage: "/event-images/{{ event.eventSlug }}.png"
    heroImageAlt: "Speaker headshots"
---

{# TODO: add more archive events. But use serverless eleventy #}

{# Speakers #}
{# Time #}
{# Time at their timezone #}
{# Panel or seminar #}
{# Image at what ratio? Make a Photoshop template for 1-6 speaker heads #}
{# Look into autogen twitter cards #}
{# Volunteer events need to be seperated from the rest #}
{# If possible set up booking for volunteer shifts #}

{# Categories and Facilitator/GM #}

{# {% include 'components/event-date-time.njk'%} #}

<div class="relative flex flex-col prose border-t-2 border-b-2 mb-base text-body gap-sm border-hr pr-md py-sm">
    <div x-cloak x-show="isAuth" class="absolute right-0 top-sm">
        <span @click="toggleFav({{event.eventId}})" class="fav-star fav-star--event-page" :class="isFav({{event.eventId}}) && 'favved'">&starf;</span>
    </div>
    <div class="text-2xl font-semibold leading-snug text-body-highlight">
        {{ event.metadata.GM }}
    </div>
    <div class="not-prose">
        <ul class="flex justify-start text-sm gap-xs">
            {% for category in event.categories %}
                <li class="rounded-full px-sm py-[.15rem] bg-card text-body">{{ category.name }}</li>
            {% endfor %}
        </ul>
    </div>
    {% if event.metadata.Players %}
        <div>
            <strong>System:</strong>
            {{event.metadata.System}}</div>
    {% endif %}
    <div>
        <strong>Length:</strong>
        {{event.metadata.Length}} hour</div>
    {% if event.metadata.Players %}
        <div class="">
            <strong>Spaces:</strong>
            <span x-text="(spacesTotal) ? spacesOpen + ' out of ' + spacesTotal : '{{event.metadata.Players}}'">{{event.metadata.Players}}</span>
        </div>
    {% endif %}
    <div>
        <strong>Player Age:</strong>
        {{event.metadata.player_age}}</div>
    <div>
        <strong>Safety Tools:</strong>
        {{event.metadata.safety_tools}}</div>

</div>

{# Event Image: bit of a kludge. Must be added to event-images folder and named the same as the eventSlug #}
{# <div class="rounded-md bg-card mb-md">
    {% image heroImage,
    heroImageAlt %}
</div> #}
{# Description #}
<div class="prose">{{event.postContent | nl2br | safe }}</div>
{# Event links #}
<div class="flex flex-wrap justify-between max-w-full prose border-t-2 border-b-2 mt-md border-hr py-sm gap-base">
    {# <div class="flex text-sm gap-xs">
        <strong>Add to calendar:</strong>
        {% set calendarDescription = "Big Bad Online 2022: " + event.eventName | safe + " https://www.bigbadcon.com/events/" + event.eventSlug %}
        <a href="{% calendarLink title, calendarDescription, event.eventStartDateTime, event.eventEndDateTime, 'google' %}">Google</a>
        <a href="{% calendarLink title, calendarDescription, event.eventStartDateTime, event.eventEndDateTime, 'ics' %}">iCal</a>
        <a href="{% calendarLink title, calendarDescription, event.eventStartDateTime, event.eventEndDateTime, 'outlook' %}">Outlook</a>
    </div> #}
    <div class="text-sm">
        {% set tweeturl = "https://twitter.com/intent/tweet?text=Check+out+this+event+at+#BigBadOCon!+https://www.bigbadcon.com/events/" + event.eventSlug %}

        <a class="inline-flex items-center gap-sm" href="{{tweeturl}}">
            <svg class="w-4 h-4 fill-body">
                <use xlink:href="/static/images/icons.svg#twitter"></use>
            </svg>Tweet This!</a>
    </div>
    <div class="text-sm">
        <a href="{{ogAPIImage | ogCacheBuster }}" class="inline-flex items-center gap-sm">
            <svg class="w-4 h-4 fill-body">
                <use xlink:href="/static/images/icons.svg#image"></use>
            </svg>Social Image Card</a>
    </div>
</div>
<div class="prose py-base">Back to <a href="/events/">List of Events</a>
</div>