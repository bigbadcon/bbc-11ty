{%- from "components/modal.njk" import authModal -%}

<!doctype html>
<html lang="en" class="min-h-screen" x-data="{timezone: $persist('America/Los_Angeles'), modal: false }">
  {% include 'layouts/html_head.njk' %}
  <body
  data-theme="auto"
  x-data="global"
  class="min-h-screen bg-primary"
  :style="(modal) && 'overflow: hidden; height: 100vh;'"
  >
    <div class="relative z-10 grid min-h-screen shadow page-wrapper">
      {# Header with branding and nav #}
      <div class="header-wrapper">
        {% block header %}
          {% include 'components/header.njk' %}
        {% endblock %}
      </div>
      <div class="relative content-wrapper bg-gradient-to-b from-main-gradient-top to-main-gradient-bottom pb-lg" >
        {# Login / Account Button #}
        <button @click.stop="modal = 'login'" class="absolute top-0 font-bold uppercase transition-all transform border rounded-b cursor-pointer text-form right-base bg-highlight px-base pb-xs pt-md hover:bg-highlight-2 hover:pt-lg border-highlight" 
        x-text="(authToken) ? 'My Account' : 'Login'">Login</button>
        {# Decorative underbrush svg #}
        <div style="-webkit-mask: url(/static/images/underbrush.svg) repeat-x; mask: url(/static/images/underbrush.svg) repeat-x; pointer-events: none;" class="h-10 underbrush bg-primary mb-sm"></div>
        {# Main Content Area. <main> tag should live in content block #}
        {% block content %}{% endblock %}
        {# Add any content footers her e#}
        {% for contentfooter in collections.contentfooter %}
          {% if (contentfooter.data.location === page.fileSlug) %}
            <section class="mx-auto max-w-content p-base">
              <h2 class="font-serif text-4xl font-bold leading-none md:text-5xl text-header mb-base">{{ contentfooter.data.title }}</h2>
              <div class="prose">{{ contentfooter.templateContent | safe }}</div>
            </section>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    {% include 'components/footer.njk' %}
    {# SVG Gradient used for svg icons sprite #}
    {% include 'components/svg-gradient.njk' %}
    {# Extra optional pagebottom code scripts and styles #}
    {% block pagebottom %}{% endblock %}
    {# Model Popup #}
    {{ authModal() }}
    {# Toast Notification #}
    {% include 'components/toast.njk' %}
  </body>

</html>